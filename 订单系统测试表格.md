# 订单系统全面测试

## 一、购物车管理测试

### 1.1 购物车基础操作

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T1.1.1 | 添加商品到购物车 | 已登录用户 | 1. 选择商品<br>2. 选择规格和颜色<br>3. 点击添加到购物车 | 商品成功添加到购物车，显示购物车商品数量 | | ☐ 通过 ☐ 失败 | |
| T1.1.2 | 添加多个不同商品 | 已登录用户 | 1. 添加商品A<br>2. 添加商品B<br>3. 添加商品C | 购物车包含3个商品 | | ☐ 通过 ☐ 失败 | |
| T1.1.3 | 添加相同商品多次 | 已登录用户 | 1. 添加商品A<br>2. 再次添加商品A | 购物车中商品A数量增加 | | ☐ 通过 ☐ 失败 | |
| T1.1.4 | 修改购物车商品数量 | 购物车有商品 | 1. 进入购物车页面<br>2. 修改商品数量 | 商品数量更新，总价重新计算 | | ☐ 通过 ☐ 失败 | |
| T1.1.5 | 删除购物车商品 | 购物车有商品 | 1. 进入购物车页面<br>2. 删除某个商品 | 该商品从购物车移除，总价重新计算 | | ☐ 通过 ☐ 失败 | |
| T1.1.6 | 清空购物车 | 购物车有多个商品 | 1. 删除所有商品 | 购物车为空，显示空购物车提示 | | ☐ 通过 ☐ 失败 | |
| T1.1.7 | 未登录添加购物车 | 未登录状态 | 1. 选择商品<br>2. 点击添加购物车 | 提示需要登录或跳转登录页 | | ☐ 通过 ☐ 失败 | |

---

## 二、订单创建测试

### 2.1 店頭買取（店铺收购）订单创建

#### 2.1.1 店頭買取 + 现金支付

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T2.1.1 | 完整信息创建订单 | 1. 购物车有商品<br>2. 用户信息完整 | 1. 选择订单类型：店頭買取<br>2. 选择店铺<br>3. 选择来店日期<br>4. 选择来店时间<br>5. 选择支付方式：现金<br>6. 提交订单 | 1. 订单创建成功<br>2. status=1, admin_status=1<br>3. 生成订单号<br>4. 发送确认邮件<br>5. 购物车清空 | | ☐ 通过 ☐ 失败 | |
| T2.1.2 | 缺少店铺信息 | 购物车有商品 | 1. 选择店頭買取<br>2. 不选择店铺<br>3. 填写其他信息<br>4. 提交 | 提示必须选择店铺，订单创建失败 | | ☐ 通过 ☐ 失败 | |
| T2.1.3 | 缺少来店日期 | 购物车有商品 | 1. 选择店頭買取<br>2. 选择店铺<br>3. 不填写来店日期<br>4. 提交 | 提示必须选择来店日期，订单创建失败 | | ☐ 通过 ☐ 失败 | |
| T2.1.4 | 缺少来店时间 | 购物车有商品 | 1. 选择店頭買取<br>2. 选择店铺<br>3. 选择来店日期<br>4. 不填写来店时间<br>5. 提交 | 提示必须选择来店时间，订单创建失败 | | ☐ 通过 ☐ 失败 | |
| T2.1.5 | 用户信息不完整 | 1. 购物车有商品<br>2. 用户缺少姓名/邮编/电话 | 1. 选择店頭買取<br>2. 填写完整订单信息<br>3. 提交 | 提示用户信息不完整，要求完善用户信息 | | ☐ 通过 ☐ 失败 | |
| T2.1.6 | 购物车为空创建订单 | 购物车为空 | 1. 直接访问订单创建页面<br>2. 填写信息提交 | 提示购物车为空，无法创建订单 | | ☐ 通过 ☐ 失败 | |

#### 2.1.2 店頭買取 + 银行转账

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T2.1.7 | 完整银行信息创建订单 | 1. 购物车有商品<br>2. 用户信息完整 | 1. 选择店頭買取<br>2. 选择店铺、日期、时间<br>3. 选择支付：银行转账<br>4. 填写完整银行信息<br>5. 提交 | 1. 订单创建成功<br>2. 银行信息保存正确<br>3. status=1, admin_status=1 | | ☐ 通过 ☐ 失败 | |
| T2.1.8 | 缺少银行账户类型 | 购物车有商品 | 1. 选择银行转账<br>2. 不填写账户类型<br>3. 填写其他银行信息<br>4. 提交 | 提示必须选择账户类型 | | ☐ 通过 ☐ 失败 | |
| T2.1.9 | 缺少银行名 | 购物车有商品 | 1. 选择银行转账<br>2. 不填写银行名<br>3. 填写其他信息<br>4. 提交 | 提示必须填写银行名 | | ☐ 通过 ☐ 失败 | |
| T2.1.10 | 缺少支店信息 | 购物车有商品 | 1. 选择银行转账<br>2. 不填写支店名或支店番号<br>3. 提交 | 提示必须填写完整支店信息 | | ☐ 通过 ☐ 失败 | |
| T2.1.11 | 缺少银行账户号 | 购物车有商品 | 1. 选择银行转账<br>2. 不填写银行账户号<br>3. 提交 | 提示必须填写银行账户号 | | ☐ 通过 ☐ 失败 | |
| T2.1.12 | 缺少账户名义 | 购物车有商品 | 1. 选择银行转账<br>2. 不填写账户名义<br>3. 提交 | 提示必须填写账户名义 | | ☐ 通过 ☐ 失败 | |

### 2.2 郵送買取（邮寄收购）订单创建

#### 2.2.1 郵送買取 + 现金支付

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T2.2.1 | 完整信息创建订单 | 1. 购物车有商品<br>2. 用户信息完整 | 1. 选择订单类型：郵送買取<br>2. 选择支付方式：现金<br>3. 提交订单 | 1. 订单创建成功<br>2. status=1, admin_status=1<br>3. 发送邮寄确认邮件<br>4. 购物车清空 | | ☐ 通过 ☐ 失败 | |
| T2.2.2 | 用户信息不完整 | 1. 购物车有商品<br>2. 用户缺少地址信息 | 1. 选择郵送買取<br>2. 提交 | 提示用户信息不完整，无法邮寄 | | ☐ 通过 ☐ 失败 | |

#### 2.2.2 郵送買取 + 银行转账

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T2.2.3 | 完整信息创建订单 | 1. 购物车有商品<br>2. 用户信息完整 | 1. 选择郵送買取<br>2. 选择银行转账<br>3. 填写完整银行信息<br>4. 提交 | 1. 订单创建成功<br>2. 银行信息保存正确<br>3. status=1, admin_status=1 | | ☐ 通过 ☐ 失败 | |
| T2.2.4 | 缺少银行信息 | 购物车有商品 | 1. 选择郵送買取<br>2. 选择银行转账<br>3. 不填写银行信息<br>4. 提交 | 提示必须填写完整银行信息 | | ☐ 通过 ☐ 失败 | |

---

## 三、订单状态流转测试（正常流程）

### 3.1 店頭買取 + 现金支付 完整流程

| 编号 | 测试场景 | 操作角色 | 当前状态 | 操作步骤 | 期望状态变化 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|------------|---------|---------|------|
| T3.1.1 | 创建订单 | 用户 | - | 创建店頭買取订单 | user_status=1<br>admin_status=1 | | ☐ 通过 ☐ 失败 | |
| T3.1.2 | 发送预约邮件 | 管理员 | admin_status=1 | 点击"予約メール"发送预约确认 | admin_status=2<br>is_send_yuyue=1 | | ☐ 通过 ☐ 失败 | |
| T3.1.3 | 批准申请 | 管理员 | admin_status=2 | 将状态改为"申込承認済" | admin_status=3<br>user_status=2 | | ☐ 通过 ☐ 失败 | |
| T3.1.4 | 接收商品 | 管理员 | admin_status=3 | 用户到店，接收商品 | admin_status=4<br>user_status=3 | | ☐ 通过 ☐ 失败 | |
| T3.1.5 | 评估协商 | 管理员 | admin_status=4 | 开始评估商品 | admin_status=5 | | ☐ 通过 ☐ 失败 | |
| T3.1.6 | 评估确认 | 管理员 | admin_status=5 | 确认评估结果 | admin_status=6 | | ☐ 通过 ☐ 失败 | |
| T3.1.7 | 发送评估邮件 | 管理员 | admin_status=6 | 点击"査定メール"发送评估结果 | 发送邮件成功 | | ☐ 通过 ☐ 失败 | |
| T3.1.8 | 入库完成 | 管理员 | admin_status=6 | 商品入库 | admin_status=7 | | ☐ 通过 ☐ 失败 | |
| T3.1.9 | 现金支付完成 | 管理员 | admin_status=7 | 现金支付给用户 | admin_status=8<br>user_status=4<br>is_pay=1 | | ☐ 通过 ☐ 失败 | |
| T3.1.10 | 用户查看完成订单 | 用户 | user_status=4 | 登录查看订单状态 | 显示"取引完了" | | ☐ 通过 ☐ 失败 | |

### 3.2 店頭買取 + 银行转账 完整流程

| 编号 | 测试场景 | 操作角色 | 当前状态 | 操作步骤 | 期望状态变化 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|------------|---------|---------|------|
| T3.2.1 | 创建订单 | 用户 | - | 创建店頭買取+银行转账订单 | user_status=1<br>admin_status=1<br>pay_mode=2 | | ☐ 通过 ☐ 失败 | |
| T3.2.2 | 发送预约邮件 | 管理员 | admin_status=1 | 发送预约确认邮件 | admin_status=2<br>is_send_yuyue=1 | | ☐ 通过 ☐ 失败 | |
| T3.2.3 | 批准申请 | 管理员 | admin_status=2 | 批准申请 | admin_status=3<br>user_status=2 | | ☐ 通过 ☐ 失败 | |
| T3.2.4 | 接收商品 | 管理员 | admin_status=3 | 接收商品 | admin_status=4<br>user_status=3 | | ☐ 通过 ☐ 失败 | |
| T3.2.5 | 评估流程 | 管理员 | admin_status=4 | 评估商品 | admin_status=5→6 | | ☐ 通过 ☐ 失败 | |
| T3.2.6 | 发送评估邮件 | 管理员 | admin_status=6 | 发送评估结果 | 发送邮件成功 | | ☐ 通过 ☐ 失败 | |
| T3.2.7 | 入库完成 | 管理员 | admin_status=6 | 商品入库 | admin_status=7 | | ☐ 通过 ☐ 失败 | |
| T3.2.8 | 银行转账支付 | 管理员 | admin_status=7 | 银行转账给用户 | admin_status=8<br>user_status=4<br>is_pay=1 | | ☐ 通过 ☐ 失败 | |
| T3.2.9 | 验证银行信息 | 管理员 | admin_status=7 | 查看订单银行信息 | 正确显示用户填写的银行账户信息 | | ☐ 通过 ☐ 失败 | |

### 3.3 郵送買取 + 现金支付 完整流程

| 编号 | 测试场景 | 操作角色 | 当前状态 | 操作步骤 | 期望状态变化 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|------------|---------|---------|------|
| T3.3.1 | 创建订单 | 用户 | - | 创建郵送買取订单 | user_status=1<br>admin_status=1 | | ☐ 通过 ☐ 失败 | |
| T3.3.2 | 协商处理 | 管理员 | admin_status=1 | 处理邮寄申请 | admin_status=2 | | ☐ 通过 ☐ 失败 | |
| T3.3.3 | 批准申请 | 管理员 | admin_status=2 | 批准邮寄申请 | admin_status=3<br>user_status=2 | | ☐ 通过 ☐ 失败 | |
| T3.3.4 | 接收邮寄商品 | 管理员 | admin_status=3 | 接收用户邮寄的商品 | admin_status=4<br>user_status=3 | | ☐ 通过 ☐ 失败 | |
| T3.3.5 | 评估流程 | 管理员 | admin_status=4 | 评估商品 | admin_status=5→6 | | ☐ 通过 ☐ 失败 | |
| T3.3.6 | 发送评估邮件 | 管理员 | admin_status=6 | 发送评估结果 | 发送邮件成功 | | ☐ 通过 ☐ 失败 | |
| T3.3.7 | 入库完成 | 管理员 | admin_status=6 | 商品入库 | admin_status=7 | | ☐ 通过 ☐ 失败 | |
| T3.3.8 | 现金支付 | 管理员 | admin_status=7 | 现金支付 | admin_status=8<br>user_status=4<br>is_pay=1 | | ☐ 通过 ☐ 失败 | |

### 3.4 郵送買取 + 银行转账 完整流程

| 编号 | 测试场景 | 操作角色 | 当前状态 | 操作步骤 | 期望状态变化 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|------------|---------|---------|------|
| T3.4.1 | 创建订单 | 用户 | - | 创建郵送買取+银行转账订单 | user_status=1<br>admin_status=1<br>pay_mode=2 | | ☐ 通过 ☐ 失败 | |
| T3.4.2 | 协商处理 | 管理员 | admin_status=1 | 处理申请 | admin_status=2 | | ☐ 通过 ☐ 失败 | |
| T3.4.3 | 批准申请 | 管理员 | admin_status=2 | 批准申请 | admin_status=3<br>user_status=2 | | ☐ 通过 ☐ 失败 | |
| T3.4.4 | 接收商品 | 管理员 | admin_status=3 | 接收邮寄商品 | admin_status=4<br>user_status=3 | | ☐ 通过 ☐ 失败 | |
| T3.4.5 | 评估流程 | 管理员 | admin_status=4 | 评估商品 | admin_status=5→6 | | ☐ 通过 ☐ 失败 | |
| T3.4.6 | 发送评估邮件 | 管理员 | admin_status=6 | 发送评估结果 | 发送邮件成功 | | ☐ 通过 ☐ 失败 | |
| T3.4.7 | 入库完成 | 管理员 | admin_status=6 | 商品入库 | admin_status=7 | | ☐ 通过 ☐ 失败 | |
| T3.4.8 | 银行转账支付 | 管理员 | admin_status=7 | 银行转账 | admin_status=8<br>user_status=4<br>is_pay=1 | | ☐ 通过 ☐ 失败 | |
| T3.4.9 | 验证银行信息 | 管理员 | 任意状态 | 查看订单详情 | 正确显示银行账户信息 | | ☐ 通过 ☐ 失败 | |

---

## 四、订单取消流程测试

### 4.1 用户主动取消（不同阶段）

| 编号 | 测试场景 | 当前状态 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T4.1.1 | 申请阶段取消订单 | user_status=1<br>admin_status=1 | 1. 用户登录<br>2. 查看订单<br>3. 点击"キャンセル" | user_status=5<br>admin_status=9 | | ☐ 通过 ☐ 失败 | |
| T4.1.2 | 协商阶段取消订单 | user_status=1<br>admin_status=2 | 1. 点击取消按钮 | user_status=5<br>admin_status=9 | | ☐ 通过 ☐ 失败 | |
| T4.1.3 | 批准后取消订单 | user_status=2<br>admin_status=3 | 1. 点击取消按钮 | user_status=5<br>admin_status=9 | | ☐ 通过 ☐ 失败 | |
| T4.1.4 | 评估中取消订单 | user_status=3<br>admin_status=4-6 | 1. 点击取消按钮 | user_status=5<br>admin_status=9 | | ☐ 通过 ☐ 失败 | |
| T4.1.5 | 入库后取消订单 | user_status=3<br>admin_status=7 | 1. 点击取消按钮 | user_status=5<br>admin_status=9 | | ☐ 通过 ☐ 失败 | |
| T4.1.6 | 已完成订单无法取消 | user_status=4<br>admin_status=8 | 1. 查看订单<br>2. 不显示取消按钮 | 无取消选项 | | ☐ 通过 ☐ 失败 | |
| T4.1.7 | 已取消订单无法再次取消 | user_status=6 | 1. 查看已取消订单 | 不显示取消按钮 | | ☐ 通过 ☐ 失败 | |

### 4.2 管理员处理取消（完整流程）

| 编号 | 测试场景 | 当前状态 | 操作步骤 | 期望状态变化 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|------------|---------|---------|------|
| T4.2.1 | 用户申请取消 | admin_status=任意<5 | 用户点击取消 | admin_status=9<br>user_status=5 | | ☐ 通过 ☐ 失败 | |
| T4.2.2 | 管理员处理取消-仅返品 | admin_status=9 | 1. 管理员确认取消<br>2. 需要返品，不需返金 | admin_status=10 | | ☐ 通过 ☐ 失败 | |
| T4.2.3 | 返品完成 | admin_status=10 | 确认返品完成 | admin_status=14<br>user_status=6 | | ☐ 通过 ☐ 失败 | |
| T4.2.4 | 管理员处理取消-返品返金 | admin_status=9 | 1. 管理员确认取消<br>2. 需要返品和返金 | admin_status=11 | | ☐ 通过 ☐ 失败 | |
| T4.2.5 | 返品完成等待返金 | admin_status=11 | 确认返品完成 | admin_status=12 | | ☐ 通过 ☐ 失败 | |
| T4.2.6 | 返金完成 | admin_status=12 | 确认返金完成 | admin_status=14<br>user_status=6 | | ☐ 通过 ☐ 失败 | |
| T4.2.7 | 管理员处理取消-返金返品（返金先） | admin_status=9 | 先处理返金 | admin_status=11 | | ☐ 通过 ☐ 失败 | |
| T4.2.8 | 返金完成等待返品 | admin_status=11 | 确认返金完成 | admin_status=13 | | ☐ 通过 ☐ 失败 | |
| T4.2.9 | 返品完成-流程结束 | admin_status=13 | 确认返品完成 | admin_status=14<br>user_status=6 | | ☐ 通过 ☐ 失败 | |
| T4.2.10 | 发送取消确认邮件 | admin_status=9-14 | 点击"注文キャンセルメール" | 发送取消邮件成功 | | ☐ 通过 ☐ 失败 | |

---

## 五、订单查看和详情测试

### 5.1 用户端订单查看

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T5.1.1 | 查看订单列表 | 用户有多个订单 | 1. 登录<br>2. 进入订单页面 | 显示所有订单，每页10条，分页正常 | | ☐ 通过 ☐ 失败 | |
| T5.1.2 | 查看订单详情 | 有订单 | 1. 点击"詳しく見る" | 显示订单完整信息和商品列表 | | ☐ 通过 ☐ 失败 | |
| T5.1.3 | 订单状态显示 | 不同状态订单 | 查看各状态订单 | 状态文字正确显示（日文） | | ☐ 通过 ☐ 失败 | |
| T5.1.4 | 查看買取申込書 | 有订单 | 点击"買取申込書" | 跳转到申请书页面或下载PDF | | ☐ 通过 ☐ 失败 | |
| T5.1.5 | 无订单时显示 | 新用户无订单 | 进入订单页面 | 显示"无订单"提示 | | ☐ 通过 ☐ 失败 | |
| T5.1.6 | 订单商品详情显示 | 订单有多个商品 | 查看订单详情 | 所有商品正确显示，包括规格、颜色、数量、价格 | | ☐ 通过 ☐ 失败 | |
| T5.1.7 | 店頭買取订单详情 | 有店铺订单 | 查看详情 | 正确显示店铺名、来店日期、来店时间 | | ☐ 通过 ☐ 失败 | |
| T5.1.8 | 银行转账订单详情 | 银行转账订单 | 查看详情 | 正确显示银行账户信息 | | ☐ 通过 ☐ 失败 | |

### 5.2 管理员端订单管理

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T5.2.1 | 订单列表查看 | 有多个订单 | 进入管理后台订单页面 | 显示所有订单及详细信息 | | ☐ 通过 ☐ 失败 | |
| T5.2.2 | 订单筛选-按状态 | 有不同状态订单 | 选择特定状态筛选 | 只显示该状态的订单 | | ☐ 通过 ☐ 失败 | |
| T5.2.3 | 订单筛选-按类型 | 有不同类型订单 | 选择订单类型筛选 | 只显示该类型订单 | | ☐ 通过 ☐ 失败 | |
| T5.2.4 | 订单筛选-按日期 | 有多个订单 | 选择日期范围 | 只显示该日期范围订单 | | ☐ 通过 ☐ 失败 | |
| T5.2.5 | 订单搜索-按订单号 | 有订单 | 输入订单号搜索 | 找到对应订单 | | ☐ 通过 ☐ 失败 | |
| T5.2.6 | 订单搜索-按用户名 | 有订单 | 输入用户名搜索 | 找到该用户所有订单 | | ☐ 通过 ☐ 失败 | |
| T5.2.7 | 查看订单详情 | 任意订单 | 点击订单查看详情 | 显示完整订单信息、用户信息、商品列表 | | ☐ 通过 ☐ 失败 | |
| T5.2.8 | 编辑订单状态 | 任意订单 | 修改订单状态 | 状态更新成功，用户端同步更新 | | ☐ 通过 ☐ 失败 | |
| T5.2.9 | 添加订单备注 | 任意订单 | 在memo字段添加备注 | 备注保存成功 | | ☐ 通过 ☐ 失败 | |
| T5.2.10 | 添加评估备注 | 评估中订单 | 在determine_memo添加评估备注 | 备注保存成功 | | ☐ 通过 ☐ 失败 | |
| T5.2.11 | 添加取消备注 | 取消订单 | 在cancel_memo添加取消原因 | 备注保存成功 | | ☐ 通过 ☐ 失败 | |

---

## 六、邮件通知测试

### 6.1 用户端邮件

| 编号 | 测试场景 | 触发条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T6.1.1 | 订单创建确认邮件 | 创建订单成功 | 提交订单 | 用户收到订单确认邮件 | | ☐ 通过 ☐ 失败 | |
| T6.1.2 | 店铺预约确认邮件 | 店頭買取订单 | 管理员发送预约邮件 | 用户收到预约确认邮件，包含店铺、日期、时间信息 | | ☐ 通过 ☐ 失败 | |
| T6.1.3 | 评估结果邮件 | 评估完成 | 管理员发送评估邮件 | 用户收到评估结果邮件 | | ☐ 通过 ☐ 失败 | |
| T6.1.4 | 订单取消确认邮件 | 用户申请取消 | 管理员发送取消邮件 | 用户收到取消确认邮件 | | ☐ 通过 ☐ 失败 | |
| T6.1.5 | 订单完成邮件 | 支付完成 | 订单状态变为完成 | 用户收到交易完成邮件 | | ☐ 通过 ☐ 失败 | |

### 6.2 邮件内容验证

| 编号 | 测试场景 | 邮件类型 | 验证内容 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T6.2.1 | 邮件包含订单号 | 所有邮件 | 检查邮件中订单号 | 订单号正确显示 | | ☐ 通过 ☐ 失败 | |
| T6.2.2 | 邮件包含商品信息 | 确认邮件 | 检查商品列表 | 所有商品正确显示 | | ☐ 通过 ☐ 失败 | |
| T6.2.3 | 邮件包含店铺信息 | 预约邮件 | 检查店铺、日期、时间 | 信息完整正确 | | ☐ 通过 ☐ 失败 | |
| T6.2.4 | 邮件包含评估金额 | 评估邮件 | 检查评估价格 | 价格正确显示 | | ☐ 通过 ☐ 失败 | |

---

## 七、导出功能测试

### 7.1 订单导出

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T7.1.1 | 导出全部订单 | 有多个订单 | 点击导出按钮 | 生成Excel文件，包含所有订单 | | ☐ 通过 ☐ 失败 | |
| T7.1.2 | 导出筛选后订单 | 已筛选订单 | 筛选后点击导出 | 只导出筛选结果 | | ☐ 通过 ☐ 失败 | |
| T7.1.3 | 导出大量订单 | >3000个订单 | 点击导出 | 自动分页导出多个文件 | | ☐ 通过 ☐ 失败 | |
| T7.1.4 | Excel内容验证 | 导出成功 | 打开Excel文件 | 订单信息完整，包括订单详情和商品详情 | | ☐ 通过 ☐ 失败 | |

### 7.2 PDF生成

| 编号 | 测试场景 | 前置条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T7.2.1 | 生成買取申込書PDF | 有订单 | 点击"買取申込書" | 生成PDF文件，可下载或查看 | | ☐ 通过 ☐ 失败 | |
| T7.2.2 | PDF内容验证 | PDF生成成功 | 打开PDF | 包含订单号、商品、用户信息、店铺信息等 | | ☐ 通过 ☐ 失败 | |
| T7.2.3 | 店頭買取PDF | 店铺订单 | 生成PDF | PDF包含店铺、日期、时间信息 | | ☐ 通过 ☐ 失败 | |
| T7.2.4 | 郵送買取PDF | 邮寄订单 | 生成PDF | PDF包含邮寄地址信息 | | ☐ 通过 ☐ 失败 | |

---

## 八、边界条件和异常测试

### 8.1 数据边界测试

| 编号 | 测试场景 | 测试数据 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T8.1.1 | 购物车最大商品数 | 添加大量商品 | 持续添加商品到购物车 | 达到上限后提示或正常处理 | | ☐ 通过 ☐ 失败 | |
| T8.1.2 | 单个商品最大数量 | 大数量 | 设置商品数量为极大值 | 提示上限或正常处理 | | ☐ 通过 ☐ 失败 | |
| T8.1.3 | 订单号唯一性 | 同一时间创建订单 | 同时创建多个订单 | 每个订单号唯一 | | ☐ 通过 ☐ 失败 | |
| T8.1.4 | 备注字段长度 | 超长文本 | 输入极长备注 | 正确保存或提示长度限制 | | ☐ 通过 ☐ 失败 | |
| T8.1.5 | 特殊字符处理 | 特殊字符 | 在各字段输入特殊字符 | 正确保存和显示，无XSS漏洞 | | ☐ 通过 ☐ 失败 | |

### 8.2 并发测试

| 编号 | 测试场景 | 测试条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T8.2.1 | 同时创建订单 | 多个用户 | 多个用户同时提交订单 | 所有订单正确创建 | | ☐ 通过 ☐ 失败 | |
| T8.2.2 | 同时修改订单状态 | 管理员操作 | 管理员同时修改多个订单 | 状态正确更新，无冲突 | | ☐ 通过 ☐ 失败 | |
| T8.2.3 | 购物车并发操作 | 同一用户多窗口 | 在多个窗口操作购物车 | 数据一致性保持 | | ☐ 通过 ☐ 失败 | |

### 8.3 异常流程测试

| 编号 | 测试场景 | 异常条件 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T8.3.1 | 网络中断时创建订单 | 提交时断网 | 提交订单时断开网络 | 提示网络错误，订单未创建或提示重试 | | ☐ 通过 ☐ 失败 | |
| T8.3.2 | 会话过期 | 登录超时 | 长时间停留后操作 | 提示重新登录 | | ☐ 通过 ☐ 失败 | |
| T8.3.3 | 直接访问API | 绕过前端 | 直接调用API创建订单 | 验证失败或正常创建 | | ☐ 通过 ☐ 失败 | |
| T8.3.4 | 修改已删除订单 | 软删除订单 | 尝试修改已删除订单 | 提示订单不存在或禁止操作 | | ☐ 通过 ☐ 失败 | |
| T8.3.5 | 支付回调异常 | 支付系统错误 | 模拟支付回调失败 | 订单状态不改变或标记异常 | | ☐ 通过 ☐ 失败 | |

---

## 九、权限和安全测试

### 9.1 权限控制

| 编号 | 测试场景 | 测试角色 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T9.1.1 | 未登录访问订单 | 游客 | 直接访问订单页面 | 跳转登录页或提示需要登录 | | ☐ 通过 ☐ 失败 | |
| T9.1.2 | 查看他人订单 | 用户A | 尝试访问用户B的订单 | 无权访问或显示404 | | ☐ 通过 ☐ 失败 | |
| T9.1.3 | 取消他人订单 | 用户A | 尝试取消用户B的订单 | 操作失败，提示无权限 | | ☐ 通过 ☐ 失败 | |
| T9.1.4 | 普通用户访问管理后台 | 普通用户 | 访问管理后台订单页面 | 无权访问 | | ☐ 通过 ☐ 失败 | |

### 9.2 安全性测试

| 编号 | 测试场景 | 测试方法 | 操作步骤 | 期望结果 | 实际结果 | 通过状态 | 备注 |
|------|---------|---------|---------|---------|---------|---------|------|
| T9.2.1 | SQL注入测试 | 注入语句 | 在搜索框输入SQL语句 | 不执行SQL，正常处理或报错 | | ☐ 通过 ☐ 失败 | |
| T9.2.2 | XSS测试 | 脚本注入 | 在备注等字段输入script标签 | 正确转义，不执行脚本 | | ☐ 通过 ☐ 失败 | |
| T9.2.3 | CSRF测试 | 跨站请求 | 从外部站点发起请求 | 请求被拒绝 | | ☐ 通过 ☐ 失败 | |
| T9.2.4 | 订单ID遍历 | ID递增测试 | 尝试遍历订单ID | 只能访问自己的订单 | | ☐ 通过 ☐ 失败 | |

---

## 十、性能测试

### 10.1 响应时间测试

| 编号 | 测试场景 | 测试条件 | 期望响应时间 | 实际响应时间 | 通过状态 | 备注 |
|------|---------|---------|------------|------------|---------|------|
| T10.1.1 | 订单列表加载 | 10个订单 | <2秒 | | ☐ 通过 ☐ 失败 | |
| T10.1.2 | 订单列表加载 | 100个订单 | <3秒 | | ☐ 通过 ☐ 失败 | |
| T10.1.3 | 订单详情加载 | 单个订单 | <1秒 | | ☐ 通过 ☐ 失败 | |
| T10.1.4 | 创建订单 | 标准流程 | <2秒 | | ☐ 通过 ☐ 失败 | |
| T10.1.5 | 导出订单 | 100个订单 | <5秒 | | ☐ 通过 ☐ 失败 | |

---

## 十一、测试总结

### 测试统计

- **总测试用例数**: ______
- **已执行**: ______
- **通过**: ______
- **失败**: ______
- **阻塞**: ______
- **跳过**: ______

### 测试覆盖率

- [ ] 购物车管理 (____%)
- [ ] 订单创建 (____%)
- [ ] 订单状态流转 (____%)
- [ ] 订单取消 (____%)
- [ ] 订单查看 (____%)
- [ ] 邮件通知 (____%)
- [ ] 导出功能 (____%)
- [ ] 边界异常 (____%)
- [ ] 权限安全 (____%)
- [ ] 性能测试 (____%)

### 发现的问题

| 问题编号 | 严重程度 | 相关测试用例 | 问题描述 | 状态 |
|---------|---------|------------|---------|------|
| | | | | |

### 测试环境信息

- **测试日期**: ____________
- **测试人员**: ____________
- **系统版本**: ____________
- **浏览器**: ____________
- **测试数据库**: ____________

---

## 附录：快速测试检查清单

### 必测路径（4条核心路径）

- [ ] **路径1**: 店頭買取 + 现金 → 完整流程到支付完成
- [ ] **路径2**: 店頭買取 + 银行转账 → 完整流程到支付完成
- [ ] **路径3**: 郵送買取 + 现金 → 完整流程到支付完成
- [ ] **路径4**: 郵送買取 + 银行转账 → 完整流程到支付完成

### 必测取消场景（6个关键节点）

- [ ] 申请阶段取消 (admin_status=1-2)
- [ ] 批准后取消 (admin_status=3)
- [ ] 评估中取消 (admin_status=4-6)
- [ ] 入库后取消 (admin_status=7)
- [ ] 取消流程-仅返品
- [ ] 取消流程-返品返金

### 必测异常场景

- [ ] 购物车为空创建订单
- [ ] 用户信息不完整
- [ ] 必填字段缺失
- [ ] 查看他人订单（权限）
- [ ] 特殊字符输入（安全）

---

**测试说明**：
1. 按照编号顺序依次测试
2. 记录每个测试的实际结果
3. 勾选通过状态
4. 失败的用例记录详细问题描述
5. 建议先完成"快速测试检查清单"确保核心功能正常
6. 然后再进行完整的系统性测试
